<Window x:Class="CompensationSystemSubInterface.WpfPfmcCondition"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="绩效查询条件设置" Height="500" Width="350"
    WindowStartupLocation="CenterScreen" Background="#F5F7FA"
    ResizeMode="CanResizeWithGrip">

    <Window.Resources>
        <!-- TreeViewItem 样式 -->
        <Style TargetType="TreeViewItem">
            <Setter Property="IsExpanded" Value="False" />
            <Setter Property="Padding" Value="2" />
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 搜索区域 -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- 员工搜索 -->
            <TextBlock Text="员工搜索：" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,5,0" />
            <TextBox x:Name="txtSearchEmp" Grid.Column="1" Height="26"
                VerticalContentAlignment="Center"
                TextChanged="txtSearchEmp_TextChanged" />
        </Grid>

        <!-- 主树形区域 -->
        <TreeView x:Name="treeConditions" Grid.Row="1"
            BorderThickness="1" BorderBrush="#DDD" Background="White">
            <TreeView.Resources>
                <!-- 右键菜单 -->
                <ContextMenu x:Key="NodeContextMenu">
                    <MenuItem Header="全选" Click="ContextMenu_SelectAll_Click" />
                    <MenuItem Header="反选" Click="ContextMenu_Invert_Click" />
                    <MenuItem Header="取消全选" Click="ContextMenu_ClearAll_Click" />
                </ContextMenu>
            </TreeView.Resources>

            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                    <StackPanel Orientation="Horizontal" Margin="2"
                        ContextMenu="{StaticResource NodeContextMenu}">
                        <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}"
                            IsThreeState="{Binding IsThreeState}"
                            Click="CheckBox_Click"
                            VerticalAlignment="Center" />
                        <TextBlock Text="{Binding DisplayText}"
                            Margin="5,0,0,0"
                            VerticalAlignment="Center"
                            FontWeight="{Binding FontWeight}" />
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>

        <!-- 底部按钮区域 -->
        <Grid Grid.Row="2" Margin="0,10,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock x:Name="lblStatus" Text="" Foreground="#666"
                VerticalAlignment="Center" FontSize="11" />

            <Button Content="重置" Grid.Column="2" Click="btnReset_Click"
                Width="70" Height="30" Margin="5,0"
                Background="#E0E0E0" BorderThickness="0" Cursor="Hand" />
            <Button Content="应用" Grid.Column="3" Click="btnApply_Click"
                Width="70" Height="30" Margin="5,0"
                Background="#1890FF" Foreground="White" BorderThickness="0"
                FontWeight="Bold" Cursor="Hand" />
            <Button Content="关闭" Grid.Column="4" Click="btnClose_Click"
                Width="70" Height="30" Margin="5,0,0,0"
                Background="#E0E0E0" BorderThickness="0" Cursor="Hand" />
        </Grid>
    </Grid>
</Window>