# 开发说明

## 业务数据规范

- 性别

  男

  女

- 学历类别

  博士研究生

  硕士研究生

  本科

  专科

  中专

  高中及以下

- 学位类别

  博士

  硕士

  学士

  无

- 政治面貌

  中共党员

  中共预备党员

  团员

  群众

- 民族

  XX 族

- 新旧同义词

  员工编号 - 编号 - 员工号

  职务 - 岗位

### 待开发需求

1. 婚姻状况不再查询和维护 ✅ 测试通过

2. 所有页面中的表格数据显示字体调整为 微软雅黑 12pt ✅ 测试通过

3. 涉及到员工信息查询的页面, 增加查询条件 ✅ 测试通过
   涉及到的页面有 UserControl_EmpQuery , UserControl_EmpMaint , UserControl_EmpCgQuery

   UserControl_EmpQuery UserControl_EmpMaint
   查询条件调整为序列,部门(已有),职务,性别(男,女),民族,属相(鼠,牛,虎...12 生肖),政治面貌,学历,学位,职称等级.

   UserControl_EmpCgQuery
   查询条件调整为序列,部门(已有)和职务筛选条件

4. 员工变动查询和修改页面需要根据角色信息调整 ✅ 测试通过

   涉及到两个角色: 一个角色可以使用变动功能,另一个角色不可以使用变动功能.
   变动功能涉及页面: UserControl_EmpMaint(变动按钮),WpfEmpMaint(变动按钮)
   本项目开发的是界面组件, 由主程序调用, 所以是否可用变动功能由主程序控制.
   主程序只调用 UserControl_EmpMaint 界面嵌入主界面,WpfEmpMaint 是 UserControl_EmpMaint 界面上的修改按钮调出的.

5. 增加离职员工信息查询页面 ✅ 测试通过
   跟员工信息查询 UserControl_EmpQuery 保持一致, 只是查询条件为 ZX_config_yg.zaizhi = 0

6. 工资统计相关页面固定列调整 ✅ 测试通过
   涉及到的页面有 UserControl_SalaryQuery , UserControl_SalaryStatistics
   当前固定的列只有姓名, 调整为 姓名,编号,部门和职务四列固定

7. 薪资统计要注意变动员工的数据 ✅
   离职员工 离职前和离职后(到薪止时间后没有薪资数据)的变化
   其他变动 更换部门要有前后部门的变化
   原则:
   薪资统计不能漏掉任何一笔金额
   例 1: 张三 3 月份离职, 薪止时间是 4 月(要发放上个月薪资), 统计 1-4 月的薪资发放的时候要计算该员工的薪资
   例 2: 张三 3 月份变更部门, 那么按照部门统计的时候就要注意了, 前三个月张三在 A 部门, 这部分钱要统计到 A 部门, 之后统计到 B 部门

## 潜在问题记录

### 薪资查询页面条件数据的查询限制

- 涉及页面

  `UserControl_SalaryQuery` , `UserControl_SalaryStatistics`

- 问题描述

  薪资数据的特殊性在于可能包含离职员工或部门变更员工的历史数据。当前的条件筛选器（如人员列表、部门列表）使用的是有效数据条件（未删除、可用、未离职等），这可能导致以下情况：

  1. **人员筛选**: 人员列表带有"在职"条件，导致无法通过下拉条件选择已离职员工来查看其历史薪资
  2. **部门筛选**: 部门列表带有"未删除"条件，导致无法通过下拉条件选择已撤销的部门来查看其历史薪资数据

- 当前状态

  **暂不修改**。当前实现已符合需求 7 的要求：

  - 查询条件使用现有的有效数据（未删除、可用、未离职）
  - 全量薪资数据的展示已包含特殊情况（离职员工、变动员工）的完整数据
  - 用户可以通过不选择特定人员/部门条件来查看全量数据，从而看到包含离职员工和已变更部门的薪资信息

- 可能的优化方向（待定）

  如果后续有明确需求，可考虑为薪资相关页面的条件查询放开限制：

  - 人员列表不带离职条件
  - 部门列表不带删除条件

## 问题修复记录

### xxx 问题

- 问题描述

  xxx

- 解决方案

  xxx
